<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dealer Gears - F&I Menus</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  
  <link rel="stylesheet" href="style-additions.css">
</head>
<body>

<div class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <div class="sidebar-title">F&I Menus</div>
  </div>
  <div class="sidebar-content">
    <ul class="sidebar-menu">
      <li class="sidebar-menu-item">
        <a href="#" id="settings-button"><i class="bi bi-gear"></i> Settings</a>
      </li>
      <li class="sidebar-menu-item">
        <a href="#"><i class="bi bi-pencil"></i> Edit</a>
      </li>
      <li class="sidebar-menu-item">
        <a href="#"><i class="bi bi-printer"></i> Print</a>
      </li>
    </ul>
  </div>
  <div class="sidebar-footer">
    <span>Dealer Gears</span>
  </div>
</div>

<div class="main-content" id="main-content">
  <div class="sidebar-toggle" id="sidebar-toggle">
    <i class="bi bi-list"></i>
  </div>
  <div class="menu-header">
    <div class="menu-title-section">
    </div>
    <div class="base-payment">
      <div class="base-payment-label">Base Protected Payment</div>
      <div class="base-payment-amount">$227.06</div>
    </div>
  </div>
    <table class="menu-table">
    <thead>
      <tr>
        <th class="platinum-bg" id="column-platinum">Platinum</th>
        <th class="gold-bg" id="column-gold">Gold</th>
        <th class="silver-bg" id="column-silver">Silver</th>
        <th class="bronze-bg" id="column-bronze">Bronze</th>
        <th class="iron-bg" id="column-iron">Iron</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          <div class="cell-content">
            <div class="price-section">
              <div class="price-main platinum-price">$49<span class="price-cents">.99</span></div>
              <div class="price-term">for 60 months</div>
            </div>
            
            <ul class="feature-list kanban-dropzone" data-plan="platinum">
              <li class="feature-item" draggable="true" data-id="p1" data-plan="platinum">
                <div class="feature-content">
                  <span class="feature-check platinum-check">✓</span>
                  <span>Extended Warranty</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p2" data-plan="platinum">
                <div class="feature-content">
                  <span class="feature-check platinum-check">✓</span>
                  <span>Rust Proofing</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p3" data-plan="platinum">
                <div class="feature-content">
                  <span class="feature-check platinum-check">✓</span>
                  <span>Paint Protection</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p4" data-plan="platinum">
                <div class="feature-content">
                  <span class="feature-check platinum-check">✓</span>
                  <span>Fabric/Leather Protection</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p5" data-plan="platinum">
                <div class="feature-content">
                  <span class="feature-check platinum-check">✓</span>
                  <span>Key Fob Replacement</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p6" data-plan="platinum">
                <div class="feature-content">
                  <span class="feature-check platinum-check">✓</span>
                  <span>GAP</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p7" data-plan="platinum">
                <div class="feature-content">
                  <span class="feature-check platinum-check">✓</span>
                  <span>Scratch/Dent Repair</span>
                </div>
              </li>
            </ul>
            
            <button class="choose-button platinum">Choose</button>
            <a href="#" class="view-terms-link" data-plan="platinum">View Full Terms & Conditions</a>
          </div>
        </td>
        
        <td>
          <div class="cell-content">
            <!-- Gold Column -->
            <div class="price-section">
              <div class="price-main gold-price">$45<span class="price-cents">.19</span></div>
              <div class="price-term">for 60 months</div>
            </div> 
            
            <ul class="feature-list kanban-dropzone" data-plan="gold">
              <li class="feature-item" draggable="true" data-id="p8" data-plan="gold">
                <div class="feature-content">
                  <span class="feature-check gold-check">✓</span>
                  <span>Extended Warranty</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p9" data-plan="gold">
                <div class="feature-content">
                  <span class="feature-check gold-check">✓</span>
                  <span>Rust Proofing</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p10" data-plan="gold">
                <div class="feature-content">
                  <span class="feature-check gold-check">✓</span>
                  <span>Paint Protection</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p11" data-plan="gold">
                <div class="feature-content">
                  <span class="feature-check gold-check">✓</span>
                  <span>Fabric/Leather Protection</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p12" data-plan="gold">
                <div class="feature-content">
                  <span class="feature-check gold-check">✓</span>
                  <span>Key Fob Replacement</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p13" data-plan="gold">
                <div class="feature-content">
                  <span class="feature-check gold-check">✓</span>
                  <span>GAP</span>
                </div>
              </li>
            </ul>
            
            <button class="choose-button gold">Choose</button>
            <a href="#" class="view-terms-link" data-plan="gold">View Full Terms & Conditions</a>
          </div>
        </td>
        
        <td>
          <div class="cell-content">
            <div class="price-section">
              <div class="price-main silver-price">$43<span class="price-cents">.11</span></div>
              <div class="price-term">for 60 months</div>
            </div>
            
            <ul class="feature-list kanban-dropzone" data-plan="silver">
              <li class="feature-item" draggable="true" data-id="p14" data-plan="silver">
                <div class="feature-content">
                  <span class="feature-check silver-check">✓</span>
                  <span>Extended Warranty</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p15" data-plan="silver">
                <div class="feature-content">
                  <span class="feature-check silver-check">✓</span>
                  <span>Rust Proofing</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p16" data-plan="silver">
                <div class="feature-content">
                  <span class="feature-check silver-check">✓</span>
                  <span>Paint Protection</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p17" data-plan="silver">
                <div class="feature-content">
                  <span class="feature-check silver-check">✓</span>
                  <span>Key Fob Replacement</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p18" data-plan="silver">
                <div class="feature-content">
                  <span class="feature-check silver-check">✓</span>
                  <span>GAP</span>
                </div>
              </li>
            </ul>
            
            <button class="choose-button silver">Choose</button>
            <a href="#" class="view-terms-link" data-plan="silver">View Full Terms & Conditions</a>
          </div>
        </td>
        
        <td>
          <div class="cell-content">
            <div class="price-section">
              <div class="price-main bronze-price">$39<span class="price-cents">.44</span></div>
              <div class="price-term">for 60 months</div>
            </div>
            
            <ul class="feature-list kanban-dropzone" data-plan="bronze">
              <li class="feature-item" draggable="true" data-id="p19" data-plan="bronze">
                <div class="feature-content">
                  <span class="feature-check bronze-check">✓</span>
                  <span>Extended Warranty</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p20" data-plan="bronze">
                <div class="feature-content">
                  <span class="feature-check bronze-check">✓</span>
                  <span>Key Fob Replacement</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p21" data-plan="bronze">
                <div class="feature-content">
                  <span class="feature-check bronze-check">✓</span>
                  <span>GAP</span>
                </div>
              </li>
            </ul>
            
            <button class="choose-button bronze">Choose</button>
            <a href="#" class="view-terms-link" data-plan="bronze">View Full Terms & Conditions</a>
          </div>
        </td>
        
        <td>
          <div class="cell-content">
            <div class="price-section">
              <div class="price-main iron-price">$28<span class="price-cents">.44</span></div>
              <div class="price-term">for 60 months</div>
            </div>
            
            <ul class="feature-list kanban-dropzone" data-plan="iron">
              <li class="feature-item" draggable="true" data-id="p22" data-plan="iron">
                <div class="feature-content">
                  <span class="feature-check iron-check">✓</span>
                  <span>Extended Warranty</span>
                </div>
              </li>
              <li class="feature-item" draggable="true" data-id="p23" data-plan="iron">
                <div class="feature-content">
                  <span class="feature-check iron-check">✓</span>
                  <span>Key Fob Replacement</span>
                </div>
              </li>
            </ul>
            
            <button class="choose-button iron">Choose</button>
            <a href="#" class="view-terms-link" data-plan="iron">View Full Terms & Conditions</a>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Settings Modal -->
<div class="settings-modal" id="settings-modal">
  <div class="settings-content">
    <div class="settings-header">
      <h2>Menu Settings</h2>
      <button class="close-button" id="close-settings">&times;</button>
    </div>
    
    <div class="settings-tabs">
      <button class="tab-button active" data-tab="column-names">Column Names</button>
      <button class="tab-button" data-tab="product-assignment">Product Assignment</button>
      <button class="tab-button" data-tab="manage-products">Manage Products</button>
    </div>
    
    <div class="settings-body">
      <div class="tab-content active" id="column-names">
        <div class="settings-section">
          <h3>Column Names</h3>
          <p class="settings-description">Customize the names of each column in your F&I menu.</p>
          <div class="column-name-inputs">
            <div class="input-group">
              <label for="platinum-name">Platinum:</label>
              <input type="text" id="platinum-name" class="column-name-input" value="Platinum">
            </div>
            <div class="input-group">
              <label for="gold-name">Gold:</label>
              <input type="text" id="gold-name" class="column-name-input" value="Gold">
            </div>
            <div class="input-group">
              <label for="silver-name">Silver:</label>
              <input type="text" id="silver-name" class="column-name-input" value="Silver">
            </div>
            <div class="input-group">
              <label for="bronze-name">Bronze:</label>
              <input type="text" id="bronze-name" class="column-name-input" value="Bronze">
            </div>
            <div class="input-group">
              <label for="iron-name">Iron:</label>
              <input type="text" id="iron-name" class="column-name-input" value="Iron">
            </div>
          </div>
          
          <!-- NEW: Column Visibility Section -->
          <div class="column-visibility-section">
            <h3 class="column-visibility-title">Column Visibility</h3>
            <p class="settings-description">Toggle which columns are visible in your F&I menu.</p>
            <div class="column-visibility-toggles">
              <div class="column-visibility-toggle">
                <input type="checkbox" id="platinum-visible" checked>
                <label for="platinum-visible">Platinum</label>
              </div>
              <div class="column-visibility-toggle">
                <input type="checkbox" id="gold-visible" checked>
                <label for="gold-visible">Gold</label>
              </div>
              <div class="column-visibility-toggle">
                <input type="checkbox" id="silver-visible" checked>
                <label for="silver-visible">Silver</label>
              </div>
              <div class="column-visibility-toggle">
                <input type="checkbox" id="bronze-visible" checked>
                <label for="bronze-visible">Bronze</label>
              </div>
              <div class="column-visibility-toggle">
                <input type="checkbox" id="iron-visible" checked>
                <label for="iron-visible">Iron</label>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="tab-content" id="product-assignment">
        <div class="settings-section">
          <h3>Assign Products to Columns</h3>
          <p class="settings-description">Toggle which products appear in each column of your F&I menu.</p>
          <div class="product-assignment-table">
            <table>
              <thead>
                <tr>
                  <th>Product</th>
                  <th>Platinum</th>
                  <th>Gold</th>
                  <th>Silver</th>
                  <th>Bronze</th>
                  <th>Iron</th>
                </tr>
              </thead>
              <tbody id="product-assignment-body">
              </tbody>
            </table>
          </div>
        </div>
      </div>
      
      <!-- Manage Products Tab -->
      <div class="tab-content" id="manage-products">
        <div class="settings-section">
          <h3>Available Products</h3>
          <p class="settings-description">Manage the products that can be assigned to columns in your F&I menu.</p>
          <div id="product-list" class="product-list">
          </div>
          
          <div class="add-product-section">
            <h3>Add New Product</h3>
            <div class="add-product-form">
              <div class="input-group">
                <label for="new-product-name">Product Name:</label>
                <input type="text" id="new-product-name" placeholder="Enter product name">
              </div>
              <div class="input-group">
                <label for="new-product-value">Product Value ($):</label>
                <input type="text" id="new-product-value" class="column-name-input" placeholder="Enter value (e.g. 500.00)">
              </div>
              <div class="input-group">
                <label for="new-product-description">Product Description:</label>
                <textarea id="new-product-description" class="column-name-input" placeholder="Enter product description" rows="3"></textarea>
              </div>
              <button id="add-product-btn" class="add-product-btn">
                <i class="bi bi-plus-circle"></i> Add Product
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="settings-footer">
      <button id="save-settings" class="save-settings-btn">
        <i class="bi bi-save"></i> Save Settings
      </button>
    </div>
  </div>
</div>

<!-- NEW: Product Explanation Modal -->
<div class="product-explanation-modal" id="product-explanation-modal">
  <div class="product-explanation-content">
    <div class="product-explanation-header">
      <h3 class="product-explanation-title" id="product-explanation-title">Product Name</h3>
      <button class="close-explanation" id="close-explanation">&times;</button>
    </div>
    <div class="product-explanation-body" id="product-explanation-body">
      <!-- Product explanation content will be inserted here -->
    </div>
    <div class="product-explanation-footer">
      <button class="close-button" id="close-explanation-btn">Close</button>
    </div>
  </div>
</div>

<!-- NEW: Full Terms Modal -->
<div class="full-terms-modal" id="full-terms-modal">
  <div class="full-terms-content">
    <div class="full-terms-header">
      <h3 class="full-terms-title" id="full-terms-title">Terms & Conditions</h3>
      <button class="close-terms" id="close-terms">&times;</button>
    </div>
    <div class="full-terms-body" id="full-terms-body">
      <!-- Terms content will be inserted here -->
    </div>
  </div>
</div>

<!-- Toast Notification -->
<div class="toast-container">
  <div class="toast" id="toast">
    <div class="toast-content">
      <i class="bi bi-check-circle toast-icon"></i>
      <div class="toast-message" id="toast-message">Settings saved successfully!</div>
    </div>
    <div class="toast-progress"></div>
  </div>
</div>

<!-- Bootstrap JS Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="script.js"></script>

<!-- NEW: Additional JavaScript for new features -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  // Product explanations data
  const productExplanations = {
    "Extended Warranty": "Extends the manufacturer's warranty beyond the standard coverage period. This protects you from expensive repair costs for mechanical and electrical failures after the original warranty expires. Coverage typically includes engine, transmission, drive axle, and electrical components.",
    "Rust Proofing": "A protective coating applied to the vehicle's undercarriage and other vulnerable areas to prevent rust and corrosion. This treatment extends the life of your vehicle, especially in areas with harsh winters where road salt is used.",
    "Paint Protection": "A clear, durable film or chemical coating applied to your vehicle's paint to protect against scratches, chips, UV damage, and environmental contaminants. Helps maintain your vehicle's appearance and resale value.",
    "Fabric/Leather Protection": "A special treatment that creates a barrier against stains, spills, and UV damage on your vehicle's interior surfaces. Makes cleanup easier and extends the life of your upholstery.",
    "Key Fob Replacement": "Coverage for the replacement of your vehicle's electronic key fob if it's lost, damaged, or stolen. Modern key fobs can cost hundreds of dollars to replace and program.",
    "GAP": "Guaranteed Asset Protection (GAP) covers the difference between what you owe on your vehicle and what your insurance pays if your vehicle is totaled or stolen. This prevents you from making payments on a vehicle you no longer have.",
    "Scratch/Dent Repair": "Coverage for minor cosmetic repairs to your vehicle's exterior, including small dents, dings, and scratches. Helps maintain your vehicle's appearance and value without filing insurance claims."
  };
  
  // Terms and conditions data for each plan
  const termsAndConditions = {
    "platinum": {
      title: "Platinum Plan - Terms & Conditions",
      content: `
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Coverage Period</h4>
          <p>The Platinum Plan provides comprehensive coverage for 7 years or 100,000 miles, whichever comes first, from the date of purchase.</p>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">What's Covered</h4>
          <p>This premium plan includes coverage for all manufacturer-installed mechanical and electrical components except those specifically listed as not covered. Key benefits include:</p>
          <ul>
            <li>Extended Warranty with $0 deductible</li>
            <li>Lifetime Rust Proofing with annual inspections</li>
            <li>Premium Paint Protection with 7-year guarantee</li>
            <li>Comprehensive Fabric/Leather Protection</li>
            <li>Unlimited Key Fob Replacements</li>
            <li>GAP Coverage up to 150% of vehicle value</li>
            <li>Unlimited Scratch/Dent Repairs</li>
          </ul>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Exclusions</h4>
          <p>The following items are not covered under this plan:</p>
          <ul>
            <li>Damage resulting from accidents, misuse, or negligence</li>
            <li>Regular maintenance items (oil changes, filters, etc.)</li>
            <li>Normal wear and tear items (brake pads, wiper blades, etc.)</li>
            <li>Cosmetic damage not affecting functionality</li>
            <li>Modifications or non-factory installed components</li>
          </ul>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Cancellation Policy</h4>
          <p>You may cancel this plan within 30 days for a full refund. After 30 days, a prorated refund will be issued based on time and mileage.</p>
        </div>
      `
    },
    "gold": {
      title: "Gold Plan - Terms & Conditions",
      content: `
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Coverage Period</h4>
          <p>The Gold Plan provides comprehensive coverage for 6 years or 85,000 miles, whichever comes first, from the date of purchase.</p>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">What's Covered</h4>
          <p>This premium plan includes coverage for most manufacturer-installed mechanical and electrical components. Key benefits include:</p>
          <ul>
            <li>Extended Warranty with $50 deductible</li>
            <li>Rust Proofing with bi-annual inspections</li>
            <li>Paint Protection with 5-year guarantee</li>
            <li>Comprehensive Fabric/Leather Protection</li>
            <li>Up to 3 Key Fob Replacements</li>
            <li>GAP Coverage up to 125% of vehicle value</li>
          </ul>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Exclusions</h4>
          <p>The following items are not covered under this plan:</p>
          <ul>
            <li>Damage resulting from accidents, misuse, or negligence</li>
            <li>Regular maintenance items (oil changes, filters, etc.)</li>
            <li>Normal wear and tear items (brake pads, wiper blades, etc.)</li>
            <li>Cosmetic damage not affecting functionality</li>
            <li>Modifications or non-factory installed components</li>
          </ul>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Cancellation Policy</h4>
          <p>You may cancel this plan within 30 days for a full refund. After 30 days, a prorated refund will be issued based on time and mileage.</p>
        </div>
      `
    },
    "silver": {
      title: "Silver Plan - Terms & Conditions",
      content: `
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Coverage Period</h4>
          <p>The Silver Plan provides coverage for 5 years or 75,000 miles, whichever comes first, from the date of purchase.</p>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">What's Covered</h4>
          <p>This plan includes coverage for many manufacturer-installed mechanical and electrical components. Key benefits include:</p>
          <ul>
            <li>Extended Warranty with $100 deductible</li>
            <li>Rust Proofing with annual inspections</li>
            <li>Paint Protection with 3-year guarantee</li>
            <li>Up to 2 Key Fob Replacements</li>
            <li>GAP Coverage up to 100% of vehicle value</li>
          </ul>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Exclusions</h4>
          <p>The following items are not covered under this plan:</p>
          <ul>
            <li>Damage resulting from accidents, misuse, or negligence</li>
            <li>Regular maintenance items (oil changes, filters, etc.)</li>
            <li>Normal wear and tear items (brake pads, wiper blades, etc.)</li>
            <li>Cosmetic damage not affecting functionality</li>
            <li>Modifications or non-factory installed components</li>
          </ul>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Cancellation Policy</h4>
          <p>You may cancel this plan within 30 days for a full refund. After 30 days, a prorated refund will be issued based on time and mileage.</p>
        </div>
      `
    },
    "bronze": {
      title: "Bronze Plan - Terms & Conditions",
      content: `
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Coverage Period</h4>
          <p>The Bronze Plan provides coverage for 4 years or 60,000 miles, whichever comes first, from the date of purchase.</p>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">What's Covered</h4>
          <p>This plan includes coverage for essential manufacturer-installed mechanical and electrical components. Key benefits include:</p>
          <ul>
            <li>Extended Warranty with $150 deductible</li>
            <li>1 Key Fob Replacement</li>
            <li>GAP Coverage up to 75% of vehicle value</li>
          </ul>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Exclusions</h4>
          <p>The following items are not covered under this plan:</p>
          <ul>
            <li>Damage resulting from accidents, misuse, or negligence</li>
            <li>Regular maintenance items (oil changes, filters, etc.)</li>
            <li>Normal wear and tear items (brake pads, wiper blades, etc.)</li>
            <li>Cosmetic damage not affecting functionality</li>
            <li>Modifications or non-factory installed components</li>
          </ul>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Cancellation Policy</h4>
          <p>You may cancel this plan within 30 days for a full refund. After 30 days, a prorated refund will be issued based on time and mileage.</p>
        </div>
      `
    },
    "iron": {
      title: "Iron Plan - Terms & Conditions",
      content: `
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Coverage Period</h4>
          <p>The Iron Plan provides coverage for 3 years or 45,000 miles, whichever comes first, from the date of purchase.</p>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">What's Covered</h4>
          <p>This basic plan includes coverage for select manufacturer-installed mechanical and electrical components. Key benefits include:</p>
          <ul>
            <li>Extended Warranty with $200 deductible</li>
            <li>1 Key Fob Replacement</li>
          </ul>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Exclusions</h4>
          <p>The following items are not covered under this plan:</p>
          <ul>
            <li>Damage resulting from accidents, misuse, or negligence</li>
            <li>Regular maintenance items (oil changes, filters, etc.)</li>
            <li>Normal wear and tear items (brake pads, wiper blades, etc.)</li>
            <li>Cosmetic damage not affecting functionality</li>
            <li>Modifications or non-factory installed components</li>
          </ul>
        </div>
        <div class="full-terms-section">
          <h4 class="full-terms-section-title">Cancellation Policy</h4>
          <p>You may cancel this plan within 30 days for a full refund. After 30 days, a prorated refund will be issued based on time and mileage.</p>
        </div>
      `
    }
  };

  // Initialize column visibility toggles
  function initializeColumnVisibility() {
    const visibilityToggles = document.querySelectorAll('.column-visibility-toggle input');
    
    visibilityToggles.forEach(toggle => {
      toggle.addEventListener('change', function() {
        const columnType = this.id.replace('-visible', '');
        const columnHeader = document.getElementById(`column-${columnType}`);
        const columnIndex = Array.from(columnHeader.parentNode.children).indexOf(columnHeader);
        
        if (columnHeader) {
          const table = document.querySelector('.menu-table');
          const headers = table.querySelectorAll('th');
          const cells = table.querySelectorAll('tbody td');
          
          if (this.checked) {
            // Show column
            headers[columnIndex].classList.remove('hidden-column');
            cells[columnIndex].classList.remove('hidden-column');
          } else {
            // Hide column
            headers[columnIndex].classList.add('hidden-column');
            cells[columnIndex].classList.add('hidden-column');
          }
        }
      });
    });
  }

  // Product explanation functionality
  function initializeProductExplanations() {
    const featureItems = document.querySelectorAll('.feature-item');
    const explanationModal = document.getElementById('product-explanation-modal');
    const explanationTitle = document.getElementById('product-explanation-title');
    const explanationBody = document.getElementById('product-explanation-body');
    const closeExplanation = document.getElementById('close-explanation');
    const closeExplanationBtn = document.getElementById('close-explanation-btn');
    
    featureItems.forEach(item => {
      item.addEventListener('click', function(e) {
        // Only show explanation if not dragging
        if (!document.body.classList.contains('is-dragging')) {
          const productName = this.querySelector('.feature-content span:not(.feature-check)').textContent.trim();
          
          if (productExplanations[productName]) {
            explanationTitle.textContent = productName;
            explanationBody.textContent = productExplanations[productName];
            explanationModal.classList.add('show');
            e.stopPropagation(); // Prevent triggering drag events
          }
        }
      });
    });
    
    // Close modal functions
    function closeModal() {
      explanationModal.classList.remove('show');
    }
    
    closeExplanation.addEventListener('click', closeModal);
    closeExplanationBtn.addEventListener('click', closeModal);
    explanationModal.addEventListener('click', function(e) {
      if (e.target === explanationModal) {
        closeModal();
      }
    });
    
    // Close on escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && explanationModal.classList.contains('show')) {
        closeModal();
      }
    });
  }

  // Full terms functionality
  function initializeFullTerms() {
    const termsLinks = document.querySelectorAll('.view-terms-link');
    const termsModal = document.getElementById('full-terms-modal');
    const termsTitle = document.getElementById('full-terms-title');
    const termsBody = document.getElementById('full-terms-body');
    const closeTerms = document.getElementById('close-terms');
    
    termsLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const planType = this.getAttribute('data-plan');
        
        if (termsAndConditions[planType]) {
          termsTitle.textContent = termsAndConditions[planType].title;
          termsBody.innerHTML = termsAndConditions[planType].content;
          termsModal.classList.add('show');
        }
      });
    });
    
    // Close modal function
    function closeModal() {
      termsModal.classList.remove('show');
    }
    
    closeTerms.addEventListener('click', closeModal);
    termsModal.addEventListener('click', function(e) {
      if (e.target === termsModal) {
        closeModal();
      }
    });
    
    // Close on escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && termsModal.classList.contains('show')) {
        closeModal();
      }
    });
  }

  // Initialize all new features
  initializeColumnVisibility();
  initializeProductExplanations();
  initializeFullTerms();
});
</script>
</body>
</html>